From 2dfa9c2eaebb2a8107c8baf9b6a9ec6f9ec0b0a8 Mon Sep 17 00:00:00 2001
From: Pascal Vizeli <pvizeli@syshack.ch>
Date: Mon, 13 Jun 2022 14:59:28 +0000
Subject: [PATCH] Support musllinux armv6l

---
 src/auditwheel/policy/__init__.py           | 1 +
 src/auditwheel/policy/musllinux-policy.json | 5 +++++
 2 files changed, 6 insertions(+)

diff --git a/src/auditwheel/policy/__init__.py b/src/auditwheel/policy/__init__.py
index 19ff9eb..cdc6ecd 100644
--- a/src/auditwheel/policy/__init__.py
+++ b/src/auditwheel/policy/__init__.py
@@ -86,6 +86,7 @@ def _fixup_musl_libc_soname(whitelist):
             "aarch64": "libc.musl-aarch64.so.1",
             "s390x": "libc.musl-s390x.so.1",
             "ppc64le": "libc.musl-ppc64le.so.1",
+            "armv6l": "libc.musl-armvhf.so.1",
             "armv7l": "libc.musl-armv7.so.1",
         }
     }
diff --git a/src/auditwheel/policy/musllinux-policy.json b/src/auditwheel/policy/musllinux-policy.json
index b103099..f261377 100644
--- a/src/auditwheel/policy/musllinux-policy.json
+++ b/src/auditwheel/policy/musllinux-policy.json
@@ -20,9 +20,12 @@
       },
       "s390x": {
       },
+      "armv6l": {
+      },
       "armv7l": {
       }
     },
+    },
     "lib_whitelist": ["libc.so", "libz.so.1"],
     "blacklist": {
       "libz.so.1": ["_dist_code", "_length_code", "_tr_align", "_tr_flush_block", "_tr_init", "_tr_stored_block", "_tr_tally", "bi_windup", "crc32_vpmsum", "crc_fold_512to32", "crc_fold_copy", "crc_fold_init", "deflate_copyright", "deflate_medium", "fill_window", "flush_pending", "gzflags", "inflate_copyright", "inflate_fast", "inflate_table", "longest_match", "slide_hash_sse", "static_ltree", "uncompress2", "x86_check_features", "x86_cpu_has_pclmul", "x86_cpu_has_sse2", "x86_cpu_has_sse42", "z_errmsg", "zcalloc", "zcfree"]
@@ -41,6 +44,8 @@
       },
       "s390x": {
       },
+      "armv6l": {
+      },
       "armv7l": {
       }
     },
-- 
2.30.2

